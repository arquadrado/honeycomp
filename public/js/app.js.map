{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["Vue.config.debug = true;\nvar currentApiary = new Apiary(handover.current_apiary);\nvar currentTab = handover.current_tab;\nvar apiaries = handover.apiaries.map(function(el){\n\treturn new Apiary(el);\n});\n\nVue.component('beehive', {\n\tprops: ['beehive'],\n\ttemplate: '#beehive'\n});\n\nVue.component('beehives', {\n\tprops: [\n\t\t'create',\n\t\t'beehives'\n\t],\n\ttemplate: '#beehives'\n});\n\nVue.component('apiary', {\n\tprops: ['apiary'],\n\ttemplate: '#apiary',\n\tdata: function(){\n\t\treturn {\n\t\t\tactive: currentTab\n\t\t}\n\t},\n\tmethods: {\n\t\tsetActiveComponent: function(component){\n\t\t\tthis.active = component;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\turl: 'http://mel.local/apiarios/sessao',\n\t\t\t\tdata: {\n\t\t\t\t\t'_token': handover.token,\n\t\t\t\t\t'data': {\n\t\t\t\t\t\ttab: this.active\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t\tsuccess: function(){\n\t\t\t\t\tconsole.log('success');\n\t\t\t\t},\n\t\t\t\terror: function(){\n\t\t\t\t\tconsole.log('error');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tactiveComponent: function(component){\n\t\t\tif(this.active === component){\n\t\t\t\treturn true;\n\t\t\t}\t\n\t\t}\n\t}\n});\n\nvar app = new Vue({\n\tel: '#app',\n\tdata: {\n\t\tapiaries: apiaries,\n\t\tselectedApiary: currentApiary\n\t},\n\tmethods: {\n\t\tselectApiary: function(apiary){\n\t\t\tthis.selectedApiary = apiary;\n\t\t\tthis.selectedApiary.saveInSession();\n\t\t},\n\t\tdeleteApiary: function(apiary){\n\t\t\tif (confirm('Tem a certeza que quer apagar este apiÃ¡rio?')) {\n\t\t\t\tvar index = this.apiaries.indexOf(apiary);\n\t\t\t\tif (index > -1) {\n\t\t\t\t    this.apiaries.splice(index, 1);\n\t\t\t\t    this.selectedApiary.remove(apiary);\n\t\t\t\t    this.selectedApiary = this.apiaries[0];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tisCurrentApiary: function(apiary){\n\t\t\treturn apiary === this.selectedApiary;\n\t\t}\n\t},\n\tevents: {\n\t\t'delete': function(){\n\t\t\tthis.deleteApiary(this.selectedApiary);\n\t\t}\n\t}\n});\n\n//constructors\nfunction Apiary(model){\n\tthis.id = model.id;\n\tthis.user_id = model.user_id;\n\tthis.name = model.name;\n\tthis.location = model.location;\n\tthis.dominant_flora = model.dominant_flora;\n\tthis.editor_route = model.editor_route;\n\tthis.create_beehive_route = model.create_beehive_route;\n\tthis.beehives = model.beehives;\n\tthis.remove = function(){\n\t\tthis.ajaxRequest(this, 'http://mel.local/apiarios/apagar', 'POST');\n\t};\n\tthis.saveInSession = function(){\n\t\tthis.ajaxRequest(this, 'http://mel.local/apiarios/sessao', 'POST');\t\n\t}\n\tthis.ajaxRequest = function(item, url, method){\n\t\t$.ajax({\n\t\t\turl: url,\n\t\t\tdata: {\n\t\t\t\t'_token': handover.token,\n\t\t\t\t'item_id': item.id\n\t\t\t},\n\t\t\tmethod: method,\n\t\t\tsuccess: function(){\n\t\t\t\tconsole.log('success');\n\t\t\t},\n\t\t\terror: function(){\n\t\t\t\tconsole.log('error');\n\t\t\t}\n\t\t});\n\t};\n}\n\n\n"],"sourceRoot":"/source/"}