{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["Vue.config.debug = true;\n\nvar windowWidth = $('.content').width();\nconsole.log(windowWidth/50);\nconsole.log(windowWidth);\n\nvar beehiveFactory = new BeehiveFactory();\nvar currentApiary = new Apiary(handover.current_apiary, beehiveFactory);\ncurrentApiary.setBeehives();\nvar currentTab = handover.current_tab;\n\nvar apiaries = handover.apiaries.map(function(el){\n\tvar beehiveFactory = new BeehiveFactory();\n\tvar apiary = new Apiary(el, beehiveFactory);\n\tapiary.setBeehives();\n\treturn apiary;\n});\n\nVue.component('beehive', {\n\tprops: ['beehive'],\n\ttemplate: '#beehive',\n\tdata: function(){\n\t\treturn {\n\n\t\t};\n\t},\n\tcomputed: {\n\t\tisActive: function(){\n\t\t\treturn this.beehive === this.$parent.currentBeehive ? '#fece06' : '#dddddd';\n\t\t},\n\t\tisFirstInRow: function(){\n\t\t\treturn this.beehive.index % (Math.floor(windowWidth/60.62)) === 0;\n\t\t},\n\t\tisĹastInRow: function(){\n\t\t\treturn this.beehive.index % (Math.floor(windowWidth/60.62)) === ((Math.floor(windowWidth/60.62)) - 1);\n\t\t},\n\t\tbeehivesCount: function(){\n\t\t\treturn this.$parent.beehivesCount;\n\t\t},\n\t\tinOddRow: function(){\n\t\t\tvar numberOfColumns = Math.floor(windowWidth/60.62);\n\t\t\tvar numberOfRows = Math.ceil(this.beehivesCount/numberOfColumns);\n\t\t\tfor(var i = 0; i < numberOfRows; i++){\n\t\t\t\tif(this.beehive.index >= (i * numberOfColumns) &&\n\t\t\t\t   this.beehive.index < ((i * numberOfColumns) + numberOfColumns)) {\n\t\t\t\t\treturn i % 2 !== 0;\n\t\t\t\t} \n\t\t\t}\n\t\t},\n\t\taddMargin: function(){\n\t\t\treturn this.isFirstInRow && this.inOddRow;\n\t\t}\n\t},\n\tmethods: {\n\t\tactivateBeehive: function(){\n\t\t\tthis.$dispatch('activateBeehive', this.beehive);\n\t\t\tthis.active = true;\n\t\t}\n\t}\n});\n\nVue.component('apiary', {\n\tprops: ['apiary'],\n\ttemplate: '#apiary',\n\tdata: function(){\n\t\treturn {\n\t\t\t\n\t\t}\n\t},\n\tcomputed: {\n\t\tbeehivesCount: function(){\n\t\t\treturn this.apiary.beehives.length;\n\t\t},\n\t\tcurrentBeehive: function(){\n\t\t\treturn this.$parent.selectedBeehive;\n\t\t} \n\t},\n\tmethods: {\n\t\tsetActiveComponent: function(component){\n\t\t\tthis.active = component;\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\turl: 'http://mel.local/apiarios/sessao',\n\t\t\t\tdata: {\n\t\t\t\t\t'_token': handover.token,\n\t\t\t\t\t'data': {\n\t\t\t\t\t\ttab: this.active\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t\tsuccess: function(){\n\t\t\t\t\tconsole.log('success');\n\t\t\t\t},\n\t\t\t\terror: function(){\n\t\t\t\t\tconsole.log('error');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tactiveComponent: function(component){\n\t\t\tif(this.active === component){\n\t\t\t\treturn true;\n\t\t\t}\t\n\t\t}\n\t},\n\tevents: {\n\t\t'activateBeehive': function(beehive){\n\t\t\tthis.currentBeehive = beehive;\n\t\t\tthis.$dispatch('currentBeehive', beehive);\n\t\t}\n\t}\n});\n\nvar app = new Vue({\n\tel: '#app',\n\tdata: {\n\t\tapiaries: apiaries,\n\t\tselectedApiary: currentApiary,\n\t\tselectedBeehive: currentApiary.beehives[0]\n\t},\n\tmethods: {\n\t\tselectApiary: function(apiary){\n\t\t\tthis.selectedApiary = apiary;\n\t\t\tthis.selectedBeehive = this.selectedApiary.beehives[0]; \n\t\t\tthis.selectedApiary.saveInSession();\n\t\t},\n\t\tdeleteApiary: function(apiary){\n\t\t\tif (confirm('Tem a certeza que quer apagar este apiário?')) {\n\t\t\t\tvar index = this.apiaries.indexOf(apiary);\n\t\t\t\tif (index > -1) {\n\t\t\t\t    this.apiaries.splice(index, 1);\n\t\t\t\t    this.selectedApiary.remove(apiary);\n\t\t\t\t    this.selectedApiary = this.apiaries[0];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tisCurrentApiary: function(apiary){\n\t\t\treturn apiary === this.selectedApiary;\n\t\t}\n\t},\n\tevents: {\n\t\t'delete': function(){\n\t\t\tthis.deleteApiary(this.selectedApiary);\n\t\t},\n\t\t'currentBeehive': function(beehive){\n\t\t\tconsole.log(beehive);\n\t\t\tthis.selectedBeehive = beehive;\n\t\t\tconsole.log(this.selectedBeehive);\n\t\t}\n\t}\n});\n\n//constructors\nfunction Apiary(model, factory){\n\tthis.id = model.id;\n\tthis.user_id = model.user_id;\n\tthis.name = model.name;\n\tthis.location = model.location;\n\tthis.dominant_flora = model.dominant_flora;\n\tthis.editor_route = model.editor_route;\n\tthis.create_beehive_route = model.create_beehive_route;\n\tthis.setBeehives = function(){\n\t\tthis.beehives = model.beehives.map(function(el){\n\t\t\treturn factory.createBeehive(el);\n\t\t});\n\t};\n\tthis.beehives = model.beehives;\n\tthis.remove = function(){\n\t\tthis.ajaxRequest(this, 'http://mel.local/apiarios/apagar', 'POST');\n\t};\n\tthis.saveInSession = function(){\n\t\tthis.ajaxRequest(this, 'http://mel.local/apiarios/sessao', 'POST');\t\n\t}\n\tthis.ajaxRequest = function(item, url, method){\n\t\t$.ajax({\n\t\t\turl: url,\n\t\t\tdata: {\n\t\t\t\t'_token': handover.token,\n\t\t\t\t'item_id': item.id\n\t\t\t},\n\t\t\tmethod: method,\n\t\t\tsuccess: function(){\n\t\t\t\tconsole.log('success');\n\t\t\t},\n\t\t\terror: function(){\n\t\t\t\tconsole.log('error');\n\t\t\t}\n\t\t});\n\t};\n}\n\nfunction BeehiveFactory(){\n\tthis.index = 0;\n\tthis.createBeehive = function(model){\n\t\treturn {\n\t\t\tindex: this.index++,\n\t\t\tid: model.id,\n\t\t\tapiary_id: model.apiary_id,\n\t\t\tname: model.name,\n\t\t\ttype: model.type,\n\t\t\teditorRoute: model.editor_route\n\t\t};\n\t}\n}\n\n"],"sourceRoot":"/source/"}